<h1>Attendance Stats</h1>

<table class="table table-striped table-bordered table-hover table-condensed">
  <thead>
  	<tr>
  	  <th>Name</th>
  	  <th>Total</th>
  	  <% @distribution.each do |name| %>
  	  	<th><%= name %></th>
  	  <% end %>	
  	</tr>
  </thead>
  <tbody>
  <% @contacts.each do |contact| %>
  	<tr>
  	  <td><%= contact.name %></td>
  	  <td><%= contact.attendance_total || 0 %></td>	
  	  <% @distribution.each do |name| %>
  	  	<td><%= number_to_percentage contact.attendance_total > 0 ? contact.send("sum_#{name}")/contact.attendance_total.to_f*100 : 0, :precision => 2, :strip_insignificant_zeros => true %></td>
  	  <% end %>	
  	</tr>
  <% end %>
  </tbody>
</table>