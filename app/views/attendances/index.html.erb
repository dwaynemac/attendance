<%- breadcrum t("attendances.index.title") -%>

    <%= content_for :header_submenu do %>
	<h2>
          <%= link_to t('attendances.index.new'), new_attendance_path %>
        </h2>
    <% end -%>
      
<% unless @time_slots_wout_day.empty? -%>
  <div class="alert alert-warning">
    <p><%= t('.timeslots_wout_schedule_warning') %></p>
    <ul class="list-group">
      <% @time_slots_wout_day.each do |time_slot| -%>
        <li class="list-group-item">
	  <b><%= time_slot.name %></b> <%= timeslot_description(time_slot) %> <%= link_to t('time_slots.index.edit'), edit_time_slot_path(time_slot), :class => 'btn btn-default btn-xs' %>
        </li>
      <% end -%>
    </ul>
  </div>
<% end -%>

<% @view_range.each do |n| %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <% date = n.days.ago.to_date %>
      <%= l(date, format: :in_context).capitalize %>
      <% if date.month != Date.today.month -%>
        (<%= l(date, format: :month) %>)
      <% end -%>
      <% if date.today? %>
        <%= link_to t('attendances.index.toggle_hidden_timeslots'), "#", :class => "btn btn-default btn-xs", :id => "toggle-hidden-timeslots" %>      
      <% end %>
    </div>
    <div class="panel-body">
      <ul class="list-group">
        <% @time_slots.each do |time_slot| %>
            <%= render 'attendances/time_slot', time_slot: time_slot, date: date %>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>

<div class="panel panel-default">
  <div class="panel-body">
    <%= link_to t('attendances.index.older'), attendances_path(days_back: 60), class: 'btn btn-primary' %>
  </div>
</div>
